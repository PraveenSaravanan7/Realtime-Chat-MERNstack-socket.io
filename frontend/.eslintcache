[{"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\index.js":"1","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\App.js":"2","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\HomePage.js":"3","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\LoginPage.js":"4","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\api.js":"5","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\UsersPage.js":"6","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\components\\UsersList.js":"7","C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\ChatPage.js":"8"},{"size":435,"mtime":1613642444331,"results":"9","hashOfConfig":"10"},{"size":752,"mtime":1613718963051,"results":"11","hashOfConfig":"10"},{"size":1614,"mtime":1613719859000,"results":"12","hashOfConfig":"10"},{"size":4236,"mtime":1613729179307,"results":"13","hashOfConfig":"10"},{"size":300,"mtime":1613642444319,"results":"14","hashOfConfig":"10"},{"size":1301,"mtime":1613719871087,"results":"15","hashOfConfig":"10"},{"size":425,"mtime":1613712412916,"results":"16","hashOfConfig":"10"},{"size":2448,"mtime":1613728482952,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},"hkq0aj",{"filePath":"21","messages":"22","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"25","messages":"26","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"20"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"20"},"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\index.js",[],["36","37"],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\App.js",[],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\HomePage.js",["38","39"],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\LoginPage.js",["40","41"],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\api.js",[],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\UsersPage.js",["42"],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\components\\UsersList.js",[],"C:\\Users\\River\\Desktop\\test\\MERN-Template\\frontend\\src\\pages\\ChatPage.js",["43","44","45"],"import React, { useEffect, useState } from 'react'\r\nimport { useLocation } from 'react-router-dom/cjs/react-router-dom.min'\r\nimport io from \"socket.io-client\";\r\nconst ls = require(\"local-storage\")\r\n\r\nconst ENDPOINT = 'http://localhost:3000';\r\n\r\nlet socket;\r\n\r\nexport const ChatPage = () => {\r\n  const [name, setName] = useState('');\r\n  const [room, setRoom] = useState('');\r\n  const [users, setUsers] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  let query= new URLSearchParams(useLocation().search)\r\n  let uid=query.get(\"id\")\r\n  function roomname(x,y){\r\n    if(x>y)\r\n      return x+y\r\n    else\r\n    return y+x\r\n  }\r\n  useEffect(() => {    \r\n    let name=uid\r\n    let room= roomname(uid, ls('user_id'))\r\n    var connectionOptions =  {\r\n      \"force new connection\" : true,\r\n      \"reconnectionAttempts\": \"Infinity\", \r\n      \"timeout\" : 10000,                  \r\n      \"transports\" : [\"websocket\"]\r\n  };\r\n\r\n    socket = io.connect(ENDPOINT,connectionOptions);\r\n\r\n    //socket = io(ENDPOINT);\r\n\r\n    setRoom(room);\r\n    setName(name)\r\n\r\n    socket.emit('join', { name, room }, (error) => {\r\n      if(error) {\r\n        alert(error);\r\n      }\r\n    });\r\n  }, [ENDPOINT]);\r\n  \r\n  useEffect(() => {\r\n    socket.on('message', message => {\r\n      setMessages(messages => [ ...messages, message ]);\r\n    });\r\n    \r\n    socket.on(\"roomData\", ({ users }) => {\r\n      setUsers(users);\r\n    });\r\n    return () => {\r\n      console.log('closed')\r\n      socket.removeAllListeners();\r\n      socket.close();\r\n    };\r\n}, []);\r\n\r\nuseEffect(()=>{\r\n  console.log(messages )\r\n},[messages])\r\n  const sendMessage = (event) => {\r\n    event.preventDefault();\r\n\r\n    if(message) {\r\n      socket.emit('sendMessage', message, () => setMessage(''));\r\n    }\r\n  }\r\n\r\n\r\n  return (\r\n    <div className=\"container pt-5\" >\r\n    <div className=\"jumbotron p-4 border bg-white col-md-6 m-auto\" >\r\n \r\n      <h5> {room} </h5>\r\n    <div>\r\n    <form className=\"form\">\r\n    <input\r\n      className=\"input\"\r\n      type=\"text\"\r\n      placeholder=\"Type a message...\"\r\n      value={message}\r\n      onChange={({ target: { value } }) => setMessage(value)}\r\n      onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n    />\r\n    <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n  </form>\r\n\r\n    <h3> {messages.length} </h3>\r\n\r\n      \r\n\r\n    </div>\r\n\r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n",{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","severity":1,"message":"51","line":4,"column":7,"nodeType":"52","messageId":"53","endLine":4,"endColumn":9},{"ruleId":"50","severity":1,"message":"54","line":8,"column":10,"nodeType":"52","messageId":"53","endLine":8,"endColumn":13},{"ruleId":"50","severity":1,"message":"55","line":1,"column":17,"nodeType":"52","messageId":"53","endLine":1,"endColumn":26},{"ruleId":"50","severity":1,"message":"56","line":7,"column":11,"nodeType":"52","messageId":"53","endLine":7,"endColumn":18},{"ruleId":"50","severity":1,"message":"54","line":7,"column":10,"nodeType":"52","messageId":"53","endLine":7,"endColumn":13},{"ruleId":"50","severity":1,"message":"57","line":11,"column":10,"nodeType":"52","messageId":"53","endLine":11,"endColumn":14},{"ruleId":"50","severity":1,"message":"58","line":13,"column":10,"nodeType":"52","messageId":"53","endLine":13,"endColumn":15},{"ruleId":"59","severity":1,"message":"60","line":47,"column":6,"nodeType":"61","endLine":47,"endColumn":16,"suggestions":"62"},"no-native-reassign",["63"],"no-negated-in-lhs",["64"],"no-unused-vars","'ls' is assigned a value but never used.","Identifier","unusedVar","'err' is assigned a value but never used.","'useEffect' is defined but never used.","'history' is assigned a value but never used.","'name' is assigned a value but never used.","'users' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'uid'. Either include it or remove the dependency array. Outer scope values like 'ENDPOINT' aren't valid dependencies because mutating them doesn't re-render the component.","ArrayExpression",["65"],"no-global-assign","no-unsafe-negation",{"desc":"66","fix":"67"},"Update the dependencies array to be: [uid]",{"range":"68","text":"69"},[1225,1235],"[uid]"]